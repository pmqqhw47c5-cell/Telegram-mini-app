<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <title>Shop Du Lev ‚Äì Catalogue</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <style>
    * {
      box-sizing: border-box;
    }

    body {
      margin: 0;
      padding: 20px 10px 70px; /* un peu plus de place pour la barre panier */
      font-family: -apple-system, system-ui, sans-serif;
      background: radial-gradient(circle at top, #14002b, #020012 60%, #000000);
      color: #fff;
      text-align: center;
    }

    /* ---------- LOGO ---------- */
    .logo {
      width: 90px;
      height: 90px;
      border-radius: 50%;
      margin: 5px auto 24px;
      background: radial-gradient(circle at 30% 20%, #00ffd9, #0070f3 60%, #00111f);
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 30px;
      font-weight: 800;
      box-shadow: 0 0 28px #00ffd9aa;
    }

    /* ---------- TOP BUTTONS ---------- */
    .top-buttons {
      width: 100%;
      max-width: 520px;
      margin: 0 auto 26px;
    }

    .top-btn {
      width: 100%;
      margin: 10px 0;
      padding: 16px 14px;
      font-size: 17px;
      border-radius: 16px;
      border: none;
      background: rgba(110, 0, 255, 0.75);
      color: #fff;
      text-shadow: 0 0 6px #e9d5ff;
      box-shadow:
        0 0 18px #8b5cf6,
        0 0 32px #4c1d95;
      font-weight: 600;
      cursor: pointer;
      transition: transform 0.15s ease, box-shadow 0.15s ease, background 0.15s ease;
    }

    .top-btn:active {
      transform: scale(0.97);
      box-shadow:
        0 0 8px #8b5cf6,
        0 0 14px #4c1d95;
      background: rgba(140, 0, 255, 0.9);
    }

    /* ---------- CATALOGUE ---------- */
    #catalogue {
      margin-top: 12px;
    }

    .product {
      width: 100%;
      max-width: 520px;
      margin: 18px auto;
      padding: 20px 18px 16px;
      border-radius: 20px;
      background: rgba(40, 0, 75, 0.9);
      box-shadow:
        0 0 28px #7e22ce,
        0 0 70px #4c1d95;
      position: relative;
      overflow: hidden;
    }

    .product::before {
      content: "";
      position: absolute;
      inset: -45%;
      background: radial-gradient(circle at top, #f97316, transparent 55%);
      opacity: 0.4;
      pointer-events: none;
    }

    .product-inner {
      position: relative;
      z-index: 1;
    }

    .fake-image {
      width: 100%;
      height: 140px;
      border-radius: 18px;
      margin-bottom: 14px;
      background: radial-gradient(circle at 20% 20%, #f97316, #0a0020 60%, #020617);
      box-shadow: 0 0 24px #f97316aa;
    }

    .product-name {
      font-size: 20px;
      font-weight: 700;
      margin-bottom: 6px;
      text-align: left;
    }

    .product-desc {
      font-size: 14px;
      color: #c4b5fd;
      margin-bottom: 12px;
      text-align: left;
    }

    .price {
      font-size: 20px;
      font-weight: 800;
      color: #22d3ee;
      text-shadow: 0 0 8px #22d3ee;
      text-align: left;
    }

    .order-btn {
      margin-top: 12px;
      padding: 11px 20px;
      border-radius: 999px;
      border: none;
      background: linear-gradient(135deg, #22d3ee, #a855f7);
      color: #020617;
      font-size: 16px;
      font-weight: 700;
      box-shadow: 0 0 18px #22d3ee;
      cursor: pointer;
      transition: transform 0.12s ease, box-shadow 0.12s ease;
    }

    .order-btn:active {
      transform: scale(0.97);
      box-shadow: 0 0 8px #22d3ee;
    }

    /* ---------- OVERLAYS GLOBAUX ---------- */
    .overlay {
      position: fixed;
      inset: 0;
      background: radial-gradient(circle at top, #120022, #020010 65%);
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 18px 10px;
      opacity: 0;
      pointer-events: none;
      transition: opacity 0.2s ease;
      z-index: 999;
    }

    .overlay.show {
      opacity: 1;
      pointer-events: auto;
    }

    .modal {
      width: 100%;
      max-width: 520px;
      border-radius: 26px;
      padding: 18px 12px 16px;
      background: radial-gradient(circle at top, #1a022b, #050010);
      box-shadow:
        0 0 32px #a855f7,
        0 0 80px #4c1d95;
      border: 2px solid rgba(236, 72, 153, 0.8);
      position: relative;
    }

    .modal-title {
      font-size: 18px;
      font-weight: 600;
      margin-bottom: 10px;
      text-align: left;
    }

    .social-img {
      width: 100%;
      border-radius: 18px;
      display: block;
    }

    .close-btn,
    .primary-btn {
      margin-top: 14px;
      width: 100%;
      padding: 13px 16px;
      border-radius: 999px;
      border: none;
      font-size: 17px;
      font-weight: 700;
      background: linear-gradient(135deg, #ec4899, #f97316);
      color: #020617;
      box-shadow: 0 0 24px #ec4899aa;
      cursor: pointer;
      transition: transform 0.12s ease, box-shadow 0.12s ease;
    }

    .primary-btn {
      background: linear-gradient(135deg, #22d3ee, #a855f7);
      box-shadow: 0 0 20px #22d3eeaa;
      margin-top: 10px;
    }

    .close-btn:active,
    .primary-btn:active {
      transform: scale(0.97);
      box-shadow: 0 0 10px #ec4899aa;
    }

    /* ---------- MODAL COMMANDE / PANIER ---------- */
    .modal-body {
      font-size: 14px;
      text-align: left;
      margin-bottom: 10px;
    }

    .qty-input {
      width: 100%;
      padding: 10px 12px;
      border-radius: 12px;
      border: 1px solid #4c1d95;
      background: #020013;
      color: #e5e7eb;
      font-size: 15px;
      margin: 6px 0 2px;
      text-align: center;
    }

    .qty-input::-webkit-outer-spin-button,
    .qty-input::-webkit-inner-spin-button {
      -webkit-appearance: none;
      margin: 0;
    }

    .qty-input[type="number"] {
      -moz-appearance: textfield;
    }

    .modal-note {
      font-size: 12px;
      color: #9ca3af;
      margin-bottom: 4px;
      text-align: left;
    }

    .cart-list {
      max-height: 260px;
      overflow-y: auto;
      margin: 10px 0 6px;
      text-align: left;
      font-size: 14px;
    }

    .cart-item {
      padding: 6px 0;
      border-bottom: 1px solid rgba(148, 163, 184, 0.2);
      display: flex;
      justify-content: space-between;
      gap: 12px;
    }

    .cart-item:last-child {
      border-bottom: none;
    }

    .cart-item-name {
      font-weight: 600;
    }

    .cart-item-qty {
      color: #a5b4fc;
      font-size: 13px;
    }

    .cart-item-price {
      font-weight: 600;
      color: #22d3ee;
    }

    .cart-total {
      margin-top: 8px;
      font-weight: 700;
      text-align: right;
      color: #22d3ee;
    }

    .empty-cart {
      margin-top: 6px;
      font-size: 13px;
      color: #9ca3af;
    }

    /* ---------- BARRE PANIER ---------- */
    .cart-bar {
      position: fixed;
      left: 50%;
      bottom: 14px;
      transform: translateX(-50%);
      width: calc(100% - 32px);
      max-width: 520px;
      padding: 10px 16px;
      border-radius: 999px;
      background: linear-gradient(135deg, #22c55e, #a855f7);
      box-shadow:
        0 0 20px #22c55eaa,
        0 0 40px #4c1d95aa;
      color: #020617;
      font-size: 15px;
      font-weight: 700;
      display: flex;
      justify-content: space-between;
      align-items: center;
      cursor: pointer;
      z-index: 900;
    }

    .cart-bar span {
      display: block;
    }

    .cart-bar-count {
      font-size: 13px;
      font-weight: 500;
      opacity: 0.9;
    }
  </style>
</head>

<body>
  <!-- LOGO -->
  <div class="logo">SL</div>

  <!-- TOP BUTTONS -->
  <div class="top-buttons">
    <button class="top-btn" id="btn-miniapp">Mini App Du Lev</button>
    <button class="top-btn" id="btn-reseaux">R√©seaux Sociaux</button>
    <button class="top-btn" id="btn-livraison">Livraison üöö</button>
  </div>

  <!-- CATALOGUE -->
  <div id="catalogue">
    <!-- Produit 1 -->
    <div class="product">
      <div class="product-inner">
        <div class="fake-image"></div>
        <div class="product-name">üéß √âcouteurs Bluetooth</div>
        <div class="product-desc">
          Autonomie, basses, r√©duction de bruit.
        </div>
        <div class="price">34,99 ‚Ç¨</div>
        <button class="order-btn">Commander</button>
      </div>
    </div>

    <!-- Produit 2 -->
    <div class="product">
      <div class="product-inner">
        <div class="fake-image"></div>
        <div class="product-name">üîã Powerbank 20 000 mAh</div>
        <div class="product-desc">
          Recharge rapide USB-C & USB. Parfait pour les longues journ√©es.
        </div>
        <div class="price">29,99 ‚Ç¨</div>
        <button class="order-btn">Commander</button>
      </div>
    </div>

    <!-- Produit 3 : exemple tiramisu -->
    <div class="product">
      <div class="product-inner">
        <div class="fake-image"></div>
        <div class="product-name">üçì Tiramisu Fraise Framboise</div>
        <div class="product-desc">
          Frais & fait maison. Edition √©t√© Shop Du Lev.
        </div>
        <div class="price">5,50 ‚Ç¨</div>
        <button class="order-btn">Commander</button>
      </div>
    </div>
  </div>

  <!-- BARRE PANIER -->
  <div class="cart-bar" id="cart-bar">
    <span>üõí Panier vide</span>
    <span class="cart-bar-count">0 article ‚Äì 0,00 ‚Ç¨</span>
  </div>

  <!-- POPUP R√âSEAUX SOCIAUX -->
  <div class="overlay" id="overlay-reseaux">
    <div class="modal">
      <div class="modal-title">R√©seaux sociaux</div>
      <!-- ‚ö†Ô∏è Image dans ton repo -->
      <img src="reseaux-test.png.PNG" alt="R√©seaux sociaux Shop Du Lev" class="social-img" />
      <button class="close-btn" id="close-reseaux">Fermer</button>
    </div>
  </div>

  <!-- POPUP CHOIX QUANTIT√â / AJOUT PANIER -->
  <div class="overlay" id="overlay-commande">
    <div class="modal">
      <div class="modal-title" id="commande-title">Ajouter au panier</div>
      <div class="modal-body" id="commande-body">
        <!-- Texte inject√© en JS -->
      </div>
      <input
        type="number"
        min="1"
        step="1"
        value="1"
        class="qty-input"
        id="commande-qty"
      />
      <div class="modal-note">Entrez la quantit√© souhait√©e puis ajoutez au panier.</div>
      <button class="primary-btn" id="btn-add-cart">Ajouter au panier</button>
      <button class="close-btn" id="btn-cancel-commande">Annuler</button>
    </div>
  </div>

  <!-- POPUP D√âTAIL PANIER -->
  <div class="overlay" id="overlay-panier">
    <div class="modal">
      <div class="modal-title">Votre panier</div>
      <div class="cart-list" id="cart-list"></div>
      <div class="cart-total" id="cart-total"></div>
      <div class="empty-cart" id="empty-cart-msg">Votre panier est vide.</div>
      <button class="close-btn" id="btn-close-panier">Fermer</button>
    </div>
  </div>

  <script>
    /* --------- BOUTONS DU HAUT --------- */
    const btnMiniApp = document.getElementById("btn-miniapp");
    const btnReseaux = document.getElementById("btn-reseaux");
    const btnLivraison = document.getElementById("btn-livraison");

    const catalogue = document.getElementById("catalogue");

    btnMiniApp.addEventListener("click", () => {
      catalogue.scrollIntoView({ behavior: "smooth" });
    });

    btnLivraison.addEventListener("click", () => {
      alert(
        "Livraison Shop Du Lev üöö\\n\\n" +
        "‚Ä¢ Besan√ßon & alentours\\n" +
        "‚Ä¢ Commande par le bot / DM\\n" +
        "‚Ä¢ Paiement √† la livraison ou en ligne."
      );
    });

    /* --------- POPUP R√âSEAUX --------- */
    const overlayReseaux = document.getElementById("overlay-reseaux");
    const closeReseaux = document.getElementById("close-reseaux");

    btnReseaux.addEventListener("click", () => {
      overlayReseaux.classList.add("show");
    });

    closeReseaux.addEventListener("click", () => {
      overlayReseaux.classList.remove("show");
    });

    overlayReseaux.addEventListener("click", (e) => {
      if (e.target === overlayReseaux) {
        overlayReseaux.classList.remove("show");
      }
    });

    /* --------- PANIER --------- */
    const cartBar = document.getElementById("cart-bar");
    const overlayCommande = document.getElementById("overlay-commande");
    const overlayPanier = document.getElementById("overlay-panier");

    const commandeTitle = document.getElementById("commande-title");
    const commandeBody = document.getElementById("commande-body");
    const commandeQty = document.getElementById("commande-qty");
    const btnAddCart = document.getElementById("btn-add-cart");
    const btnCancelCommande = document.getElementById("btn-cancel-commande");

    const cartList = document.getElementById("cart-list");
    const cartTotal = document.getElementById("cart-total");
    const emptyCartMsg = document.getElementById("empty-cart-msg");
    const btnClosePanier = document.getElementById("btn-close-panier");

    let cart = [];
    let currentProduct = null;

    // R√©cup√©ration des boutons Commander
    document.querySelectorAll(".product").forEach((productEl) => {
      const nameEl = productEl.querySelector(".product-name");
      const priceEl = productEl.querySelector(".price");
      const btnOrder = productEl.querySelector(".order-btn");

      const name = nameEl.textContent.trim();
      const price = parsePrice(priceEl.textContent);

      btnOrder.addEventListener("click", () => {
        openCommandeModal(name, price);
      });
    });

    function parsePrice(text) {
      // "34,99 ‚Ç¨" -> 34.99
      const clean = text.replace(/[^\d,]/g, "").replace(",", ".");
      const value = parseFloat(clean);
      return isNaN(value) ? 0 : value;
    }

    function formatPrice(value) {
      return value.toFixed(2).replace(".", ",") + " ‚Ç¨";
    }

    function openCommandeModal(name, price) {
      currentProduct = { name, price };
      commandeTitle.textContent = "Ajouter au panier";
      commandeBody.textContent = name + " ‚Äì " + formatPrice(price);
      commandeQty.value = "1";
      overlayCommande.classList.add("show");
      commandeQty.focus();
    }

    function closeCommandeModal() {
      overlayCommande.classList.remove("show");
      currentProduct = null;
    }

    btnCancelCommande.addEventListener("click", closeCommandeModal);

    overlayCommande.addEventListener("click", (e) => {
      if (e.target === overlayCommande) {
        closeCommandeModal();
      }
    });

    btnAddCart.addEventListener("click", () => {
      if (!currentProduct) return;

      let qty = parseInt(commandeQty.value, 10);
      if (isNaN(qty) || qty <= 0) {
        alert("Merci d‚Äôentrer une quantit√© valide (au moins 1).");
        return;
      }

      // Cherche si produit d√©j√† dans le panier
      const existing = cart.find((item) => item.name === currentProduct.name);
      if (existing) {
        existing.qty += qty;
      } else {
        cart.push({
          name: currentProduct.name,
          price: currentProduct.price,
          qty: qty,
        });
      }

      updateCartBar();
      closeCommandeModal();
    });

    function updateCartBar() {
      let totalQty = 0;
      let totalPrice = 0;

      cart.forEach((item) => {
        totalQty += item.qty;
        totalPrice += item.qty * item.price;
      });

      const labelSpan = cartBar.querySelector("span:first-child");
      const countSpan = cartBar.querySelector(".cart-bar-count");

      if (totalQty === 0) {
        labelSpan.textContent = "üõí Panier vide";
        countSpan.textContent = "0 article ‚Äì 0,00 ‚Ç¨";
      } else {
        labelSpan.textContent = "üõí Voir le panier";
        const articleWord = totalQty > 1 ? "articles" : "article";
        countSpan.textContent =
          totalQty + " " + articleWord + " ‚Äì " + formatPrice(totalPrice);
      }
    }

    // Ouverture du d√©tail du panier
    cartBar.addEventListener("click", () => {
      openCartModal();
    });

    function openCartModal() {
      cartList.innerHTML = "";
      let totalQty = 0;
      let totalPrice = 0;

      if (cart.length === 0) {
        emptyCartMsg.style.display = "block";
        cartTotal.textContent = "";
      } else {
        emptyCartMsg.style.display = "none";

        cart.forEach((item) => {
          totalQty += item.qty;
          totalPrice += item.qty * item.price;

          const row = document.createElement("div");
          row.className = "cart-item";

          const left = document.createElement("div");
          const nameSpan = document.createElement("div");
          nameSpan.className = "cart-item-name";
          nameSpan.textContent = item.name;

          const qtySpan = document.createElement("div");
          qtySpan.className = "cart-item-qty";
          qtySpan.textContent = "Quantit√© : " + item.qty;

          left.appendChild(nameSpan);
          left.appendChild(qtySpan);

          const right = document.createElement("div");
          right.className = "cart-item-price";
          right.textContent = formatPrice(item.qty * item.price);

          row.appendChild(left);
          row.appendChild(right);

          cartList.appendChild(row);
        });

        cartTotal.textContent =
          "Total (" +
          totalQty +
          (totalQty > 1 ? " articles" : " article") +
          ") : " +
          formatPrice(totalPrice);
      }

      overlayPanier.classList.add("show");
    }

    function closeCartModal() {
      overlayPanier.classList.remove("show");
    }

    btnClosePanier.addEventListener("click", closeCartModal);

    overlayPanier.addEventListener("click", (e) => {
      if (e.target === overlayPanier) {
        closeCartModal();
      }
    });

    // Init affichage
    updateCartBar();
  </script>
</body>
</html>
